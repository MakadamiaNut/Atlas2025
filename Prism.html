<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prism Archive | Clean Version</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            background-color: white;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            font-family: sans-serif;
        }

        .canvas {
            position: relative;
            width: 100vw; height: 100vh;
            display: flex; justify-content: center; align-items: center;
        }

        .circle-container {
            position: absolute;
            width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            opacity: 0;
            pointer-events: none;
            z-index: 500;
        }

        .photo-card {
            position: absolute;
            width: 120px; height: 150px;
            background-size: cover;
            background-position: center;
            background-color: #222;
            border-radius: 4px;
            filter: drop-shadow(0 0 5px rgba(41, 168, 156, 0.2));
            border: 0.5px solid rgba(41, 168, 156, 0.1);
            pointer-events: all;
            cursor: pointer;
        }

        .prism-wrapper {
            position: relative;
            z-index: 1000;
            display: flex; flex-direction: column; align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .prism-shape {
            width: 0; height: 0;
            border-left: 55px solid transparent;
            border-right: 55px solid transparent;
            border-bottom: 78px solid rgba(255, 255, 255, 0.95);
            filter: drop-shadow(0 0 8px rgba(41, 168, 156, 0.4)); 
            transition: border-bottom-color 0.4s ease, filter 0.4s ease;
        }

        .prism-text {
            position: absolute;
            top: 42px; width: 65px;
            text-align: center; font-size: 10px; font-weight: 900;
            color: #ffffff; line-height: 1.1;
            pointer-events: none; opacity: 0; z-index: 1001;
        }

        .main-label {
            margin-top: 20px; font-size: 11px; letter-spacing: 0.3em;
            text-transform: uppercase; color: white; font-weight: bold;
            text-shadow: 0 0 10px rgba(41, 168, 156, 0.6);
        }
    </style>
</head>
<body>

    <div class="canvas">
        <div class="circle-container" id="circleContainer"></div>
        
        <div class="prism-wrapper" id="prismBtn">
            <div class="prism-shape" id="prismShape"></div>
            <div class="prism-text" id="infoText">CITY</div>
            <div class="main-label" id="mainLabel">Refract</div>
        </div>
    </div>

    <script>
        const container = document.getElementById('circleContainer');
        const prismBtn = document.getElementById('prismBtn');
        const prismShape = document.getElementById('prismShape');
        const infoText = document.getElementById('infoText');
        const mainLabel = document.getElementById('mainLabel');
        const total = 18;
        let isActive = false;
        let rotationTween;

        const photoData = [
            { text: "LONDON", color: "#7C0F24" }, { text: "CARDIFF", color: "#A7172E" },
            { text: "SALZBURG", color: "#AD521F" }, { text: "AMSTERDAM", color: "#F7942C" },
            { text: "AMSTERDAM", color: "#B29247" }, { text: "LJUBLJANA", color: "#D8BA94" },
            { text: "LACOCK", color: "#E4CA46" }, { text: "BLED", color: "#D5DC47" },
            { text: "SAMOBOR", color: "#85BB8C" }, { text: "PLITVICE", color: "#247F82" },
            { text: "BRUSSEL", color: "#5287C9" }, { text: "BLED", color: "#5292DE" },
            { text: "WERFEN", color: "#436BD3" }, { text: "MUNICH", color: "#69767E" },
            { text: "LONDON", color: "#071726" }, { text: "ANTWERPEN", color: "#2B478A" },
            { text: "LONDON", color: "#8C68D4" }, { text: "LONDON", color: "#322558" }
        ];

        for (let i = 0; i < total; i++) {
            const card = document.createElement('div');
            card.className = 'photo-card';
            card.style.opacity = "0"; 
            card.style.backgroundImage = `url('img${i+1}.jpg')`;
            
            card.addEventListener('mouseenter', () => {
                if(!isActive) return;
                
                infoText.innerText = photoData[i].text;
                gsap.to(infoText, { opacity: 1, duration: 0.2 });

                prismShape.style.borderBottomColor = photoData[i].color;
                prismShape.style.filter = `drop-shadow(0 0 10px ${photoData[i].color}88)`;

                gsap.to(card, { 
                    scale: 1.05, 
                    filter: `drop-shadow(0 0 12px ${photoData[i].color}) brightness(1.1)`,
                    duration: 0.3
                });
            });

            card.addEventListener('mouseleave', () => {
                gsap.to(infoText, { opacity: 0, duration: 0.2 });
                
                prismShape.style.borderBottomColor = "rgba(255, 255, 255, 0.95)";
                prismShape.style.filter = "drop-shadow(0 0 8px rgba(41, 168, 156, 0.4))";

                gsap.to(card, { 
                    scale: 1, 
                    filter: "drop-shadow(0 0 5px rgba(41, 168, 156, 0.2)) brightness(1)",
                    duration: 0.3
                });
            });

            container.appendChild(card);
        }

        prismBtn.addEventListener('click', () => {
            if (!isActive) startArchive();
            else resetArchive();
        });

        function startArchive() {
            isActive = true;
            mainLabel.innerText = "Converge";
            gsap.to(container, { opacity: 1, duration: 0.5, pointerEvents: "all" });

            const cards = document.querySelectorAll('.photo-card');
            cards.forEach((card, i) => {
                const angle = (i / total) * 360;
                const radius = 280;

                gsap.to(card, {
                    x: Math.cos(angle * Math.PI / 180) * radius,
                    y: Math.sin(angle * Math.PI / 180) * radius,
                    rotation: angle + 90,
                    opacity: 1,
                    duration: 1.5,
                    delay: i * 0.04,
                    ease: "back.out(1.4)"
                });
            });

            rotationTween = gsap.to(container, {
                rotation: 360,
                duration: 80,
                repeat: -1,
                ease: "none"
            });
        }

        function resetArchive() {
            isActive = false;
            mainLabel.innerText = "Explore Memories";
            if (rotationTween) rotationTween.kill();

            gsap.to(".photo-card", {
                x: 0, y: 0, rotation: 0, opacity: 0,
                duration: 1,
                stagger: 0.02,
                ease: "power2.inOut"
            });

            gsap.to(container, { rotation: 0, opacity: 0, duration: 1, pointerEvents: "none" });
            gsap.to(infoText, { opacity: 0 });
            
            prismShape.style.borderBottomColor = "rgba(255, 255, 255, 0.95)";
            prismShape.style.filter = "drop-shadow(0 0 8px rgba(41, 168, 156, 0.4))";
        }
    </script>
</body>
</html>